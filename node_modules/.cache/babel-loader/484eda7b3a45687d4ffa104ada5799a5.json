{"ast":null,"code":"var _jsxFileName = \"/home/eninov/FirebasePro/fireproim/src/components/ImageUpload.jsx\";\nimport React, { Component } from 'react';\nimport ImageCropper from './imagecropper';\nimport { storage } from '../firebase';\n\nclass ImageUpload extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleChange = e => {\n      if (e.target.files[0]) {\n        const image = e.target.files[0];\n        this.setState(() => ({\n          image\n        }));\n      }\n    };\n\n    this.handleUpload = () => {\n      const {\n        image\n      } = this.state;\n      const uploadTask = storage.ref(`images/${image.name}`).put(image);\n      uploadTask.on('state_changed', snapshot => {// progress function  ....\n      }, error => {\n        // error function .... \n        console.log(error);\n      }, () => {\n        // complete function ....\n        storage.ref('images').child(image.name).getDownloadURL().then(url => {\n          console.log(url);\n          this.setState({\n            url\n          });\n        });\n      });\n    };\n\n    this.state = {\n      image: null,\n      url: ''\n    };\n    this.handleUpload = this.handleUpload.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n  }\n\n  render() {\n    const style = {\n      height: '100vh',\n      display: 'flex',\n      flexDirection: 'column',\n      alignItems: 'center',\n      justifyContent: 'center'\n    };\n    return /*#__PURE__*/React.createElement(\"div\", {\n      style: style,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 12\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"file\",\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 12\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      onClick: this.handleUpload,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 12\n      }\n    }, \"Upload\"), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 12\n      }\n    }), /*#__PURE__*/React.createElement(ImageCropper, {\n      src: \"this.state.url || 'http://via.placeholder.com/400x300'\",\n      s: true,\n      alt: \"Uploaded images\",\n      height: \"300\",\n      width: \"400\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 12\n      }\n    }));\n  }\n\n}\n\nexport default ImageUpload;","map":{"version":3,"sources":["/home/eninov/FirebasePro/fireproim/src/components/ImageUpload.jsx"],"names":["React","Component","ImageCropper","storage","ImageUpload","constructor","props","handleChange","e","target","files","image","setState","handleUpload","state","uploadTask","ref","name","put","on","snapshot","error","console","log","child","getDownloadURL","then","url","bind","render","style","height","display","flexDirection","alignItems","justifyContent"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,YAAP,MAAyB,gBAAzB;AACA,SAAQC,OAAR,QAAsB,aAAtB;;AACA,MAAMC,WAAN,SAA0BH,SAA1B,CAAoC;AAClCI,EAAAA,WAAW,CAACC,KAAD,EACX;AACI,UAAMA,KAAN;;AADJ,SAUGC,YAVH,GAUkBC,CAAC,IAAI;AAChB,UAAGA,CAAC,CAACC,MAAF,CAASC,KAAT,CAAe,CAAf,CAAH,EAAqB;AACjB,cAAMC,KAAK,GAAIH,CAAC,CAACC,MAAF,CAASC,KAAT,CAAe,CAAf,CAAf;AACA,aAAKE,QAAL,CAAc,OAAK;AAACD,UAAAA;AAAD,SAAL,CAAd;AAEH;AAEJ,KAjBJ;;AAAA,SAkBGE,YAlBH,GAkBkB,MAAO;AAClB,YAAM;AAACF,QAAAA;AAAD,UAAS,KAAKG,KAApB;AACA,YAAMC,UAAU,GAAGZ,OAAO,CAACa,GAAR,CAAa,UAASL,KAAK,CAACM,IAAK,EAAjC,EAAoCC,GAApC,CAAwCP,KAAxC,CAAnB;AACCI,MAAAA,UAAU,CAACI,EAAX,CAAc,eAAd,EAA+BC,QAAD,IAAc,CACzC;AACF,OAFD,EAGCC,KAAD,IAAW;AACP;AACFC,QAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACD,OAND,EAOA,MAAM;AACD;AACHlB,QAAAA,OAAO,CAACa,GAAR,CAAY,QAAZ,EAAsBQ,KAAtB,CAA4Bb,KAAK,CAACM,IAAlC,EAAwCQ,cAAxC,GAAyDC,IAAzD,CAA8DC,GAAG,IAAI;AACjEL,UAAAA,OAAO,CAACC,GAAR,CAAYI,GAAZ;AACA,eAAKf,QAAL,CAAc;AAACe,YAAAA;AAAD,WAAd;AACA,SAHJ;AAID,OAbD;AAcD,KAnCP;;AAEI,SAAKb,KAAL,GAAa;AACTH,MAAAA,KAAK,EAAE,IADE;AAETgB,MAAAA,GAAG,EAAC;AAFK,KAAb;AAIF,SAAKd,YAAL,GAAoB,KAAKA,YAAL,CAAkBe,IAAlB,CAAuB,IAAvB,CAApB;AACA,SAAKrB,YAAL,GAAoB,KAAKA,YAAL,CAAkBqB,IAAlB,CAAuB,IAAvB,CAApB;AACC;;AA6BFC,EAAAA,MAAM,GAAG;AACL,UAAMC,KAAK,GAAG;AACVC,MAAAA,MAAM,EAAC,OADG;AAEVC,MAAAA,OAAO,EAAC,MAFE;AAGVC,MAAAA,aAAa,EAAC,QAHJ;AAIVC,MAAAA,UAAU,EAAC,QAJD;AAKVC,MAAAA,cAAc,EAAC;AALL,KAAd;AAOA,wBACI;AAAK,MAAA,KAAK,EAAEL,KAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACA;AAAO,MAAA,IAAI,EAAE,MAAb;AAAoB,MAAA,QAAQ,EAAE,KAAKvB,YAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADA,eAEA;AAAQ,MAAA,OAAO,EAAE,KAAKM,YAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAFA,eAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAHA,eAIA,oBAAC,YAAD;AAAc,MAAA,GAAG,EAAG,wDAApB;AAA4E,MAAA,CAAC,MAA7E;AAA8E,MAAA,GAAG,EAAC,iBAAlF;AAAoG,MAAA,MAAM,EAAC,KAA3G;AAAiH,MAAA,KAAK,EAAC,KAAvH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAJA,CADJ;AAQH;;AAvDgC;;AAyDpC,eAAeT,WAAf","sourcesContent":["import React, { Component } from 'react';\nimport ImageCropper from './imagecropper';\nimport {storage} from '../firebase';\nclass ImageUpload extends Component {\n  constructor(props)\n  {\n      super(props);\n      this.state = { \n          image: null,\n          url:''\n      }\n    this.handleUpload = this.handleUpload.bind(this); \n    this.handleChange = this.handleChange.bind(this);\n    }\n   \n     handleChange = e => {\n         if(e.target.files[0]){\n             const image  = e.target.files[0];\n             this.setState(()=>({image}));\n\n         }\n\n     }\n     handleUpload = ( ) => {\n         const {image} =this.state;\n         const uploadTask = storage.ref(`images/${image.name}`).put(image);  \n          uploadTask.on('state_changed',(snapshot) => {\n             // progress function  ....\n          }, \n          (error) => {\n              // error function .... \n            console.log(error);\n          }, \n          () => {\n               // complete function ....\n            storage.ref('images').child(image.name).getDownloadURL().then(url => {\n                console.log(url); \n                this.setState({url});      \n               })\n          });\n        } \n\n   render() {\n       const style = {\n           height:'100vh',\n           display:'flex',\n           flexDirection:'column',\n           alignItems:'center',\n           justifyContent:'center'\n        };\n       return(\n           <div style={style}>\n           <input type =\"file\" onChange={this.handleChange}/>\n           <button onClick={this.handleUpload}>Upload</button>\n           <br/>\n           <ImageCropper src = \"this.state.url || 'http://via.placeholder.com/400x300'\"s alt=\"Uploaded images\" height=\"300\" width=\"400\"/>\n         </div>\n       );\n   }\n}\nexport default ImageUpload;"]},"metadata":{},"sourceType":"module"}